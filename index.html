<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ãµã‚‰ã£ã¨cafeï½œé…ä¿¡ä¸­ãƒã‚§ãƒƒã‚¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 20px;
    }
    h1 { text-align: center; margin-bottom: 24px; }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 16px;
      max-width: 1100px;
      margin: 0 auto;
    }
    .card {
      background: #020617;
      border-radius: 16px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.4);
      border: 2px solid transparent;
      transition: 0.3s;
    }
    .card.live { border-color: #ef4444; }
    .header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    .icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
    }
    .name { font-size: 18px; font-weight: 700; }
    .status { font-size: 14px; margin-top: 4px; }
    .live-badge { color: #ef4444; font-weight: 700; }
    .offline { color: #94a3b8; }
    .thumb {
      width: 100%;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      border-radius: 12px;
      background: #020617;
      margin: 10px 0 8px;
    }
    a { color: #38bdf8; text-decoration: none; font-size: 14px; }
    .footer {
      text-align: center;
      margin-top: 32px;
      font-size: 12px;
      color: #64748b;
    }
  </style>
</head>
<body>
  <h1>â˜• ãµã‚‰ã£ã¨cafe é…ä¿¡çŠ¶æ³</h1>

  <div class="grid">
    <!-- YouTube -->
    <div class="card" id="youtube-card">
      <div class="header">
        <img class="icon" src="https://yt3.ggpht.com/ytc/UCAsCx41YE4mEIBCIAGOzFfA=s300-c-k-c0x00ffffff-no-rj" />
        <div>
          <div class="name">YouTube</div>
          <div class="status" id="youtube-status">åˆ¤å®šä¸­â€¦</div>
        </div>
      </div>
      <img id="youtube-thumb" class="thumb" style="display:none" />
      <a href="https://www.youtube.com/@flatcafe_games/live" target="_blank">é…ä¿¡ãƒšãƒ¼ã‚¸ã¸</a>
    </div>

    <!-- Twitch cards -->
    <div class="card" id="wakanagi">
      <div class="name">è‹¥å‡ªï¼ˆTwitchï¼‰</div>
      <div class="status">åˆ¤å®šä¸­â€¦</div>
      <img class="thumb" style="display:none" />
      <a href="https://www.twitch.tv/wakanagi" target="_blank">ãƒãƒ£ãƒ³ãƒãƒ«ã¸</a>
    </div>

    <div class="card" id="yuzucha08">
      <div class="name">æŸšèŒ¶ï¼ˆTwitchï¼‰</div>
      <div class="status">åˆ¤å®šä¸­â€¦</div>
      <img class="thumb" style="display:none" />
      <a href="https://www.twitch.tv/yuzucha08" target="_blank">ãƒãƒ£ãƒ³ãƒãƒ«ã¸</a>
    </div>

    <div class="card" id="lily00_flca">
      <div class="name">Lily00ï¼ˆTwitchï¼‰</div>
      <div class="status">åˆ¤å®šä¸­â€¦</div>
      <img class="thumb" style="display:none" />
      <a href="https://www.twitch.tv/lily00_flca" target="_blank">ãƒãƒ£ãƒ³ãƒãƒ«ã¸</a>
    </div>

    <div class="card" id="tourma_flca">
      <div class="name">ã¨ã‚‹ã¾ï¼ˆTwitchï¼‰</div>
      <div class="status">åˆ¤å®šä¸­â€¦</div>
      <img class="thumb" style="display:none" />
      <a href="https://www.twitch.tv/tourma_flca" target="_blank">ãƒãƒ£ãƒ³ãƒãƒ«ã¸</a>
    </div>
  </div>

  <div class="footer">â€» 1åˆ†ã”ã¨ã«è‡ªå‹•æ›´æ–° / GitHub Pages å¯¾å¿œ</div>

<script>
// =====================
// YouTube Live + Thumbnail
// =====================
const YT_API_KEY = 'AIzaSyA6e6pIM3e85U_S6Hu3gIpxwsx0_E37vIE';
const CHANNEL_ID = 'UCAsCx41YE4mEIBCIAGOzFfA';

async function checkYouTube() {
  const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&type=video&eventType=live&liveBroadcastContent=live&maxResults=1&key=${YT_API_KEY}`;
  const status = document.getElementById('youtube-status');
  const card = document.getElementById('youtube-card');
  const thumb = document.getElementById('youtube-thumb');
  try {
    const res = await fetch(url);
    const data = await res.json();
    if (data.items && data.items.length > 0) {
      const item = data.items[0];
      status.innerHTML = '<span class="live-badge">ğŸ”´ LIVEï¼ˆé…ä¿¡ä¸­ï¼‰</span>';
      card.classList.add('live');
      thumb.src = item.snippet.thumbnails.medium.url;
      thumb.style.display = 'block';
    } else {
      status.innerHTML = '<span class="offline">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³</span>';
      card.classList.remove('live');
      thumb.style.display = 'none';
    }
  } catch {
    status.textContent = 'å–å¾—å¤±æ•—';
  }
}

// =====================
// Twitch Live + Thumbnail
// =====================
const twitchChannels = [
  'wakanagi',
  'yuzucha08',
  'lily00_flca',
  'tourma_flca'
];

async function checkTwitch(channel) {
  const card = document.getElementById(channel);
  const statusEl = card.querySelector('.status');
  const thumb = card.querySelector('.thumb');
  try {
    const res = await fetch(`https://decapi.me/twitch/uptime/${channel}`);
    const text = await res.text();
    if (!text.includes('offline')) {
      statusEl.innerHTML = `<span class="live-badge">ğŸ”´ LIVEï¼ˆ${text}ï¼‰</span>`;
      card.classList.add('live');
      thumb.src = `https://static-cdn.jtvnw.net/previews-ttv/live_user_${channel}-440x248.jpg?rand=${Date.now()}`;
      thumb.style.display = 'block';
    } else {
      statusEl.innerHTML = '<span class="offline">ã‚ªãƒ•ãƒ©ã‚¤ãƒ³</span>';
      card.classList.remove('live');
      thumb.style.display = 'none';
    }
  } catch {
    statusEl.textContent = 'å–å¾—å¤±æ•—';
  }
}

function refreshAll() {
  checkYouTube();
  twitchChannels.forEach(checkTwitch);
}

refreshAll();
setInterval(refreshAll, 60000);
</script>
</body>
</html>
