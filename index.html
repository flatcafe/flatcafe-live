<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>â˜• ãµã‚‰ã£ã¨cafe LIVE</title>

  <!-- OGP -->
  <meta property="og:title" content="â˜• ãµã‚‰ã£ã¨cafe LIVE" />
  <meta property="og:description" content="é…ä¿¡ä¸­ã®YouTubeãƒ»Twitchã‚’ã²ã¨ç›®ã§ãƒã‚§ãƒƒã‚¯" />
  <meta property="og:type" content="website" />

  <style>
    :root {
      --bg-dark: #0f0f12;
      --card-bg: rgba(255,255,255,0.08);
      --card-border: rgba(255,255,255,0.15);
      --accent: #c7a16a;
      --live: #ef4444;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: "Segoe UI", "Noto Sans JP", sans-serif;
      background:
        linear-gradient(rgba(0,0,0,0.65), rgba(0,0,0,0.85)),
        url("https://images.unsplash.com/photo-1509042239860-f550ce710b93?auto=format&fit=crop&w=1600&q=80") center/cover fixed;
      color: #f5f5f5;
    }

    header {
      text-align: center;
      padding: 48px 16px 32px;
    }

    header h1 {
      margin: 0;
      font-size: 2rem;
      letter-spacing: 0.08em;
    }

    header p {
      margin-top: 8px;
      color: #ccc;
      font-size: 0.9rem;
    }

    main {
      max-width: 1100px;
      margin: 0 auto 64px;
      padding: 0 16px;
    }

    section {
      margin-top: 40px;
    }

    section h2 {
      font-size: 1.2rem;
      letter-spacing: 0.1em;
      color: var(--accent);
      margin-bottom: 16px;
      text-align: center;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
    }

    .card {
      position: relative;
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid var(--card-border);
      border-radius: 18px;
      overflow: hidden;
      transition: transform 0.25s ease, box-shadow 0.25s ease;
      text-decoration: none;
      color: inherit;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.5);
    }

    .thumb {
      max-width: 100%;
      height: 180px; /* å¥½ããªé«˜ã•ã«å›ºå®š */
      object-fit: cover; /* åˆ‡ã‚ŠæŠœãã§ã‚«ãƒ¼ãƒ‰ã«åã‚ã‚‹ */
      border-radius: 12px;
    }

    .card.live .thumb {
      display: block;
    }

    .content {
      padding: 16px;
      text-align: center;
    }

    .name {
      font-size: 1.05rem;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .status {
      font-size: 0.85rem;
      opacity: 0.9;
    }

    .card.live {
      border-color: var(--live);
      box-shadow: 0 0 20px rgba(239,68,68,0.45);
    }

    .live-badge {
      position: absolute;
      top: 12px;
      left: 12px;
      background: var(--live);
      color: white;
      font-size: 0.75rem;
      padding: 4px 10px;
      border-radius: 999px;
      display: none;
      animation: pulse 1.4s infinite;
    }

    .card.live .live-badge {
      display: inline-block;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    footer {
      text-align: center;
      font-size: 0.75rem;
      color: #aaa;
      margin-top: 64px;
      padding-bottom: 24px;
    }

    @media (max-width: 600px) {
      header h1 { font-size: 1.6rem; }
    }
  </style>
</head>
<body>

<header>
  <h1>â˜• ãµã‚‰ã£ã¨cafe LIVE</h1>
  <p>ã„ã¾é…ä¿¡ã—ã¦ã‚‹ï¼Ÿã‚’ä¸€ç¬ã§</p>
</header>

<main>

  <section>
    <h2>ğŸ“º YouTube</h2>
    <div class="grid">
      <a id="youtube-card" class="card" href="https://www.youtube.com/@flatcafe_games/live" target="_blank">
        <span class="live-badge">ğŸ”´ LIVE</span>
        <img id="youtube-thumb" class="thumb" />
        <div class="content">
          <div class="name">ãµã‚‰ã£ã¨cafe</div>
          <div id="youtube-status" class="status">OFFLINE</div>
        </div>
      </a>
    </div>
  </section>

  <section>
    <h2>ğŸ® Twitch</h2>
    <div class="grid">
      <a id="twitch-wakanagi" class="card" href="https://www.twitch.tv/wakanagi" target="_blank"><span class="live-badge">ğŸ”´ LIVE</span><img id="thumb-wakanagi" class="thumb" /><div class="content"><div class="name">è‹¥å‡ª</div><div id="status-wakanagi" class="status">OFFLINE</div></div></a>
      <a id="twitch-yuzucha" class="card" href="https://www.twitch.tv/yuzucha08" target="_blank"><span class="live-badge">ğŸ”´ LIVE</span><img id="thumb-yuzucha" class="thumb" /><div class="content"><div class="name">æŸšèŒ¶</div><div id="status-yuzucha" class="status">OFFLINE</div></div></a>
      <a id="twitch-lily" class="card" href="https://www.twitch.tv/lily00_flca" target="_blank"><span class="live-badge">ğŸ”´ LIVE</span><img id="thumb-lily" class="thumb" /><div class="content"><div class="name">Lily00</div><div id="status-lily" class="status">OFFLINE</div></div></a>
      <a id="twitch-tourma" class="card" href="https://www.twitch.tv/tourma_flca" target="_blank"><span class="live-badge">ğŸ”´ LIVE</span><img id="thumb-tourma" class="thumb" /><div class="content"><div class="name">ã¨ã‚‹ã¾</div><div id="status-tourma" class="status">OFFLINE</div></div></a>
    </div>
  </section>

</main>

<footer>â˜• flatcafe live status</footer>

<script>
/***** è¨­å®š *****/
const YT_API_KEY = 'AIzaSyA6e6pIM3e85U_S6Hu3gIpxwsx0_E37vIE';
const YT_CHANNEL_ID = 'UCAsCx41YE4mEIBCIAGOzFfA';

const twitchChannels = {
  wakanagi: 'wakanagi',
  yuzucha: 'yuzucha08',
  lily: 'lily00_flca',
  tourma: 'tourma_flca'
};

/***** YouTube *****/
async function checkYouTube() {
  const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${YT_CHANNEL_ID}&type=video&eventType=live&maxResults=1&key=${YT_API_KEY}`;
  const res = await fetch(url);
  const data = await res.json();

  const card = document.getElementById('youtube-card');
  const status = document.getElementById('youtube-status');
  const thumb = document.getElementById('youtube-thumb');

  if (data.items && data.items.length > 0) {
    const video = data.items[0];
    card.classList.add('live');
    status.textContent = 'LIVE';
    thumb.src = video.snippet.thumbnails.high.url;
    card.href = `https://www.youtube.com/watch?v=${video.id.videoId}`;
  } else {
    card.classList.remove('live');
    status.textContent = 'OFFLINE';
  }
}

/***** Twitch *****/
async function checkTwitch(key, channel) {
  const res = await fetch(`https://decapi.me/twitch/uptime/${channel}`);
  const text = await res.text();

  const card = document.getElementById(`twitch-${key}`);
  const status = document.getElementById(`status-${key}`);
  const thumb = document.getElementById(`thumb-${key}`);

  if (!text.includes('offline')) {
    card.classList.add('live');
    status.textContent = 'LIVE';
    thumb.src = `https://static-cdn.jtvnw.net/previews-ttv/live_user_${channel}-440x248.jpg?rand=${Date.now()}`;
  } else {
    card.classList.remove('live');
    status.textContent = 'OFFLINE';
  }
}

function refreshAll() {
  checkYouTube();
  for (const key in twitchChannels) {
    checkTwitch(key, twitchChannels[key]);
  }
}

refreshAll();
setInterval(refreshAll, 60000);
</script>

</body>
</html>
